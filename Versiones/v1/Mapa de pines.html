<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interactivo de Yucatán</title>

    <!-- 1. Estilos de Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <!-- 2. Scripts de Leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- 3. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Personalización de los popups de Leaflet para que coincidan con el diseño */
        .leaflet-popup-content-wrapper {
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .leaflet-popup-content {
            margin: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
        }
        .leaflet-popup-tip {
            background: white;
        }
        /* Asegura que el contenedor principal ocupe casi toda la pantalla */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        body {
            background-color: #f7fafc; /* bg-gray-100 */
        }
    </style>
</head>
<body class="font-sans">

    <div class="container mx-auto p-4">
        <header class="text-center mb-4">
            <h1 class="text-3xl font-bold text-gray-800">Explora los Tesoros de Yucatán</h1>
            <p class="text-gray-500 mt-1">Selecciona una categoría para descubrir lugares increíbles en el mapa.</p>
        </header>

        <!-- Contenedor principal para el mapa y las categorías -->
        <main class="flex flex-col md:flex-row md:gap-6 md:h-[75vh]">

            <!-- Columna del Mapa -->
            <div id="map" class="w-full h-[350px] md:h-full rounded-xl shadow-lg"></div>

            <!-- Barra lateral de Categorías -->
            <aside class="w-full md:w-1/3 lg:w-1/4 mt-4 md:mt-0 p-4 bg-white rounded-xl shadow-lg">
                <h2 class="text-xl font-semibold text-center text-gray-700 mb-4">Categorías</h2>
                <div class="flex flex-col gap-3">
                    <button onclick="showCategory('todos')" class="w-full px-4 py-2.5 bg-sky-600 text-white font-semibold rounded-lg shadow-md hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-opacity-75 transition-all transform hover:scale-105">
                        Mostrar Todos
                    </button>
                    <button onclick="showCategory('cenote')" class="w-full px-4 py-2.5 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-opacity-75 transition-all transform hover:scale-105">
                        Cenotes
                    </button>
                    <button onclick="showCategory('arqueologia')" class="w-full px-4 py-2.5 bg-amber-600 text-white font-semibold rounded-lg shadow-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:ring-opacity-75 transition-all transform hover:scale-105">
                        Zonas Arqueológicas
                    </button>
                    <button onclick="showCategory('hacienda')" class="w-full px-4 py-2.5 bg-emerald-600 text-white font-semibold rounded-lg shadow-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-75 transition-all transform hover:scale-105">
                        Haciendas
                    </button>
                </div>
            </aside>
        </main>
    </div>

<script>
    // --- DATOS DE EJEMPLO ---
    // ¡Aquí es donde agregas tus lugares!
    // Simplemente añade una propiedad "url" a cada objeto con el enlace que desees.
    const locations = [
        { 
            name: "Cenote Ik Kil", 
            category: "cenote", 
            lat: 20.6639, 
            lng: -88.5539, 
            description: "Un famoso cenote abierto cerca de Chichén Itzá, ideal para nadar en sus aguas cristalinas.", 
            imageUrl: "https://placehold.co/300x200/3498db/ffffff?text=Cenote+Ik+Kil",
            url: "#" // <-- REEMPLAZA '#' CON TU ENLACE
        },
        { 
            name: "Chichén Itzá", 
            category: "arqueologia", 
            lat: 20.6843, 
            lng: -88.5678, 
            description: "Una de las Nuevas Siete Maravillas del Mundo y un sitio emblemático de la civilización maya.", 
            imageUrl: "https://placehold.co/300x200/f39c12/ffffff?text=Chichén+Itzá",
            url: "#" // <-- REEMPLAZA '#' CON TU ENLACE
        },
        { 
            name: "Hacienda Yaxcopoil", 
            category: "hacienda", 
            lat: 20.7025, 
            lng: -89.7567, 
            description: "Una hacienda henequenera que conserva su maquinaria y mobiliario original, un viaje al pasado.", 
            imageUrl: "https://placehold.co/300x200/2ecc71/ffffff?text=Hacienda+Yaxcopoil",
            url: "#" // <-- REEMPLAZA '#' CON TU ENLACE
        },
        { 
            name: "Cenote Suytun", 
            category: "cenote", 
            lat: 20.6869, 
            lng: -88.1969, 
            description: "Conocido por su plataforma de piedra en el centro, es un cenote de cueva espectacular.", 
            imageUrl: "https://placehold.co/300x200/3498db/ffffff?text=Cenote+Suytun",
            url: "#" // <-- REEMPLAZA '#' CON TU ENLACE
        },
        { 
            name: "Uxmal", 
            category: "arqueologia", 
            lat: 20.3596, 
            lng: -89.7713, 
            description: "Impresionante zona arqueológica de estilo Puuc, con la Pirámide del Adivino como principal atractivo.", 
            imageUrl: "https://placehold.co/300x200/f39c12/ffffff?text=Uxmal",
            url: "#" // <-- REEMPLAZA '#' CON TU ENLACE
        },
        { 
            name: "Hacienda Sotuta de Peón", 
            category: "hacienda", 
            lat: 20.7511, 
            lng: -89.5858, 
            description: "Hacienda viva que muestra el proceso del henequén, con un hermoso cenote para refrescarse.", 
            imageUrl: "https://placehold.co/300x200/2ecc71/ffffff?text=Sotuta+de+Peón",
            url: "#" // <-- REEMPLAZA '#' CON TU ENLACE
        }
    ];

    // --- LÓGICA DEL MAPA ---

    const map = L.map('map').setView([20.7, -89.0], 9);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '© <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);
    let markerLayer = L.layerGroup().addTo(map);

    function showCategory(category) {
        markerLayer.clearLayers();
        const filteredLocations = locations.filter(loc => category === 'todos' || loc.category === category);
        if (filteredLocations.length === 0) return;

        const bounds = L.latLngBounds();
        filteredLocations.forEach(location => {
            const marker = L.marker([location.lat, location.lng]);
            
            // Contenido del popup con enlaces en la imagen y el título
            const popupContent = `
                <div class="w-64">
                    <a href="${location.url}" target="_blank" rel="noopener noreferrer">
                        <img src="${location.imageUrl}" alt="${location.name}" class="w-full h-32 object-cover rounded-t-lg transition-transform transform hover:scale-105">
                    </a>
                    <div class="p-3">
                        <a href="${location.url}" target="_blank" rel="noopener noreferrer" class="hover:underline">
                            <h3 class="text-lg font-bold text-gray-800">${location.name}</h3>
                        </a>
                        <p class="text-sm text-gray-600 mt-1">${location.description}</p>
                    </div>
                </div>
            `;
            marker.bindPopup(popupContent);
            marker.addTo(markerLayer);
            bounds.extend([location.lat, location.lng]);
        });
        map.fitBounds(bounds, { padding: [50, 50], maxZoom: 14 });
    }

    window.onload = function() {
        showCategory('todos');
        setTimeout(() => map.invalidateSize(), 100);
    };
</script>

</body>
</html>

